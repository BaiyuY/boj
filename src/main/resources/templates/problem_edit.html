{% extends "base.html" %}

{% block content %}
<script>
$(document).ready(function() {
    var descriptionEditor = ace.edit("description-editor");
    descriptionEditor.setTheme("ace/theme/monokai");
    descriptionEditor.setFontSize(16);
    descriptionEditor.setShowPrintMargin(false);
    descriptionEditor.getSession().setMode("ace/mode/html");

    var templateEditor = ace.edit("template-editor");
    templateEditor.setTheme("ace/theme/monokai");
    templateEditor.setFontSize(16);
    templateEditor.setShowPrintMargin(false);
    templateEditor.getSession().setMode("ace/mode/java");

    var testEditor = ace.edit("test-editor");
    testEditor.setTheme("ace/theme/monokai");
    testEditor.setFontSize(16);
    testEditor.setShowPrintMargin(false);
    testEditor.getSession().setMode("ace/mode/java");
});

function createOrUpdateProblem() {
    var description = ace.edit("description-editor").getValue();
    var template = ace.edit("template-editor").getValue();
    var test = ace.edit("test-editor").getValue();
    var title = $('#problem-title').val();
    var id = "{{problem.id}}";
    $.post('/problem', {
        id: id,
        title: title,
        description: description,
        template: template,
        test: test
    },
    function() {
        location.href = "/problems";
    });
}
</script>
Title:<br>
<input id="problem-title" type="text" value="{{problem.title}}"><br>
Description:<br>
<div class="editor" id="description-editor">{{problem.description}}</div>
Template:<br>
<div class="editor" id="template-editor">{{problem.templateSrc}}</div>
Test:<br>
<div class="editor" id="test-editor">{{test.junitTestSrc}}</div>
<input type="submit" value="{{button}}" onclick="createOrUpdateProblem()">
{% endblock %}
